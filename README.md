# Hawkeye üê¶üëÅÔ∏è
s
Hawkeye ‚Äî –±–µ–∫–µ–Ω–¥‚Äë—Å–µ—Ä–≤—ñ—Å –Ω–∞ Python, —è–∫–∏–π:

- –≤—ñ–¥—Å—Ç–µ–∂—É—î –∑–º—ñ–Ω–∏ —É —Ñ–∞–π–ª–æ–≤—ñ–π —Å–∏—Å—Ç–µ–º—ñ (create / delete / modify / move)
- —Ç—Ä–∞–Ω—Å–ª—é—î –ø–æ–¥—ñ—ó —Ç–∞ –ª–æ–≥–∏ –∫–ª—ñ—î–Ω—Ç–∞–º —á–µ—Ä–µ–∑ Socket.IO (WebSocket)
- –ø–∏—à–µ –∂—É—Ä–Ω–∞–ª –ª–æ–≥—ñ–≤ —É SQLite + –ø–æ–∫–∞–∑—É—î —ó—Ö —É –∫–æ–Ω—Å–æ–ª—ñ

---

## –í–∏–º–æ–≥–∏

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É
- Python 3.11+

### –î–ª—è Docker
- Docker Desktop / Docker Engine
- Docker Compose (–ø–ª–∞–≥—ñ–Ω `docker compose`)

---

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
pip install -r requirements.txt
uvicorn main:fastapi_app --reload --port 8000
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:8000`.

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

–ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –∑–∞–¥–∞–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ `.env` –∞–±–æ —á–µ—Ä–µ–∑ `environment:` —É Docker Compose.

### `.env`
–°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:

```env
# –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–ª—è —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è (—Ä–æ–∑–¥—ñ–ª—é–≤–∞—á ; )
WATCH_DIRS=\watch;\test

# –†–µ–∫—É—Ä—Å–∏–≤–Ω–µ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è (true/false)
WATCH_RECURSIVE=true

# –®–ª—è—Ö –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏–∑ SQLite
DB_PATH=hawkeye.db

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —á–µ—Ä–≥–∏ –ø–æ–¥—ñ–π
QUEUE_MAXSIZE=10000

# –ù–∞–∑–≤–∞ socket –ø–æ–¥—ñ—ó –¥–ª—è change file events
SOCKET_FILE_CHANGE_EVENT_NAME=file_change_event

# –ù–∞–∑–≤–∞ socket –ø–æ–¥—ñ—ó –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
SOCKET_LOG_EVENT_NAME=log_event

# –í–∞–∂–ª–∏–≤–æ!!! –¥–ª—è Docker Desktop: —É–≤—ñ–º–∫–Ω—É—Ç–∏ polling, —â–æ–± –±–∞—á–∏—Ç–∏ –∑–º—ñ–Ω–∏ –∑ —Ö–æ—Å—Ç–∞
WATCHDOG_POLLING=true
```

---

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤—ñ—Å—É

1) –°–µ—Ä–≤—ñ—Å —á–∏—Ç–∞—î `WATCH_DIRS` (–º–æ–∂–Ω–∞ –∫—ñ–ª—å–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —á–µ—Ä–µ–∑ `;`).
2) Watcher –ª–æ–≤–∏—Ç—å —Ñ–∞–π–ª–æ–≤—ñ –ø–æ–¥—ñ—ó —Ç–∞ —Å—Ç–≤–æ—Ä—é—î `ChangeFileEvent`.
3) –ü–æ–¥—ñ—ó –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ –ø–∞–π–ø–ª–∞–π–Ω/—á–µ—Ä–≥—É —ñ:
   - –ª–æ–≥—É—é—Ç—å—Å—è
   - —Ç—Ä–∞–Ω—Å–ª—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Socket.IO –∫–ª—ñ—î–Ω—Ç–∞–º:
     - –ø–æ–¥—ñ—ó –∑–º—ñ–Ω —Ñ–∞–π–ª—ñ–≤ ‚Äî —É `SOCKET_FILE_CHANGE_EVENT_NAME` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `file_change_event`)
     - –ª–æ–≥–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É ‚Äî —É `SOCKET_LOG_EVENT_NAME` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `log_event`)
4) –ñ—É—Ä–Ω–∞–ª –ª–æ–≥—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SQLite

---

## –ó–∞–ø—É—Å–∫ —É Docker

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —î –ø–∞–ø–∫–∞ `deploy/` –∑ `Dockerfile` —Ç–∞ `docker-compose.yaml`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –±—ñ–ª—è compose
`deploy/docker-compose.yaml` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤—ñ–¥–Ω–æ—Å–Ω—ñ —à–ª—è—Ö–∏. –¢–æ–º—É –ø–∞–ø–∫–∏ –¥–ª—è –º–∞—É–Ω—Ç—É –º–∞—é—Ç—å –ª–µ–∂–∞—Ç–∏ –ø–æ—Ä—É—á –∑ compose‚Äë—Ñ–∞–π–ª–æ–º:

```
Hawkeye/
  deploy/
    docker-compose.yaml
    Dockerfile
    watched/      <-- –ø–∞–ø–∫–∞, —è–∫—É –±—É–¥–µ –º–æ–Ω—Ç—É–≤–∞—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    database/     <-- —Ç—É—Ç –±—É–¥–µ –ª–µ–∂–∞—Ç–∏ hawkeye.db
```

### –ó–∞–ø—É—Å–∫
–ó –∫–æ—Ä–µ–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:

```bash
docker compose -f deploy/docker-compose.yaml up --build
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:8000` (–ø–æ—Ä—Ç–∏ `8000:8000`).

### –í–∞–∂–ª–∏–≤–æ –¥–ª—è Windows (Docker Desktop)

–ù–∞ bind‚Äëmount –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è—Ö –ø–æ–¥—ñ—ó —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ —á–∞—Å—Ç–æ **–Ω–µ –ø—Ä–æ–∫–∏–¥–∞—é—Ç—å—Å—è** —á–µ—Ä–µ–∑ inotify.
–§–∞–π–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è, –∞–ª–µ watcher –Ω–µ –±–∞—á–∏—Ç—å –∑–º—ñ–Ω, –∑—Ä–æ–±–ª–µ–Ω–∏—Ö –Ω–∞ —Ö–æ—Å—Ç—ñ.

–¢–æ–º—É —É Docker Compose –¥–ª—è —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ —É–≤—ñ–º–∫–Ω–µ–Ω–æ —Ä–µ–∂–∏–º polling —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É:

- `WATCHDOG_POLLING=true`

–¶–µ –∑–º—É—à—É—î watcher –æ–ø–∏—Ç—É–≤–∞—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —ñ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –±–∞—á–∏—Ç–∏ –∑–º—ñ–Ω–∏, –∑—Ä–æ–±–ª–µ–Ω—ñ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ñ–π –ø–∞–ø—Ü—ñ.

---

## –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π HTML —Ñ—Ä–æ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤

–ú–æ–Ω–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π HTML‚Äë—Ñ–∞–π–ª —É –±—Ä–∞—É–∑–µ—Ä—ñ ‚Äî –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ Socket.IO —ñ –±—É–¥–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ª–æ–≥–∏ —É –¥–≤–æ—Ö –±–ª–æ–∫–∞—Ö:

- **File changes** ‚Äî –ø–æ–¥—ñ—ó –∑–º—ñ–Ω —Ñ–∞–π–ª—ñ–≤ (`file_change_event`)
- **App logs** ‚Äî –ª–æ–≥–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (`log_event`)

### –§—Ä–æ–Ω—Ç
1) –£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —î —Ñ–∞–π–ª `deploy/index.html`.
2) –î–æ—Å—Ç–∞—Ç–Ω—å–æ –π–æ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —ñ –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏—î–¥–Ω–∞—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä—É, 
–∞–±–æ –¥–æ–∫–µ—Ä–∞ –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ, —è—â–∫–æ —É –Ω—å–æ–º—É –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ñ—Ä–æ–Ω—Ç –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ `http://localhost:8000`.

---

### –°–æ–∫–µ—Ç–∏
–ü—Ä–æ—Å—Ç–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ä–æ–±–æ—Ç–∏ –∑ —Å–æ–∫–µ—Ç–∞–º–∏, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—ñ–¥'—î–¥–Ω–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É —Ç–∞ –ø–æ—á–∞—Ç–∏ —Å–ª—É—Ö–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø–æ–¥—ñ—ó —è–∫—ñ –≤—ñ–¥–¥–∞—î —Å–µ—Ä–≤–µ—Ä
```html
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const socket = io("http://localhost:8000");

  socket.on("file_change_event", data => {
    console.log("File change:", data);
  });

  socket.on("log_event", data => {
    console.log("Log:", data);
  });
</script>

```